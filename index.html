<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OKì €ì¶•ì€í–‰ íšŒì˜ìë£Œ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
  <style>
    :root {
      --ok-orange: #E93D1A;
      --ok-dark-brown: #554744;
      --ok-yellow: #F4A611;
      --ok-bright-gray: #C5C5C5;
      --ok-bg-gray: #F8F8F8;
      --ok-text-dark: #2D2D2D;
      --ok-border-light: #E8E8E8;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
      background-color: var(--ok-bg-gray);
      color: var(--ok-text-dark);
      min-height: 100vh;
    }

    /* í†µí•© ë¡œê·¸ì¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
    .login-page {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, var(--ok-bg-gray) 0%, #e8e8e8 100%);
      padding: 20px;
    }

    .login-container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.1);
      padding: 40px;
      max-width: 500px;
      width: 100%;
      text-align: center;
      border: 2px solid var(--ok-border-light);
    }

    .login-header {
      margin-bottom: 30px;
    }

    .login-logo svg {
      height: 60px;
      width: auto;
      margin-bottom: 20px;
    }

    .login-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--ok-text-dark);
      margin-bottom: 10px;
    }

    .login-subtitle {
      color: var(--ok-dark-brown);
      font-size: 1rem;
      margin-bottom: 20px;
    }

    .login-type-selector {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      background: var(--ok-bg-gray);
      padding: 6px;
      border-radius: 12px;
    }

    .login-type-btn {
      flex: 1;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      background: transparent;
      color: var(--ok-text-dark);
    }

    .login-type-btn.active {
      background: var(--ok-orange);
      color: white;
      box-shadow: 0 4px 15px rgba(233, 61, 26, 0.3);
    }

    .login-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .form-group {
      text-align: left;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--ok-text-dark);
    }

    .form-input {
      width: 100%;
      padding: 15px;
      border: 2px solid var(--ok-border-light);
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: #fafafa;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--ok-orange);
      background: white;
      box-shadow: 0 0 0 3px rgba(233, 61, 26, 0.1);
    }

    .login-btn {
      background: linear-gradient(135deg, var(--ok-orange) 0%, #ff6b35 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(233, 61, 26, 0.3);
      margin-top: 10px;
    }

    .login-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(233, 61, 26, 0.4);
    }

    .login-btn:disabled {
      background: var(--ok-bright-gray);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .login-message {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      font-size: 0.9rem;
      display: none;
    }

    .login-message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .login-message.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .login-message.info {
      background: #cce5ff;
      color: #004085;
      border: 1px solid #b3d9ff;
    }

    /* ë©”ì¸ ì•± ìŠ¤íƒ€ì¼ */
    .main-app {
      display: none;
      min-height: 100vh;
    }

    .app-header {
      background: linear-gradient(135deg, var(--ok-dark-brown) 0%, #3D2F2C 100%);
      color: white;
      padding: 20px 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      position: relative;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .app-header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--ok-orange) 0%, var(--ok-yellow) 100%);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-logo svg {
      height: 40px;
      width: auto;
    }

    .header-title {
      font-size: 1.8rem;
      font-weight: 700;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .user-info {
      background: rgba(255,255,255,0.1);
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .btn-header {
      background: var(--ok-orange);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .btn-header:hover {
      background: #ff4520;
      transform: translateY(-2px);
    }

    .btn-header.secondary {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.3);
    }

    .btn-header.secondary:hover {
      background: rgba(255,255,255,0.2);
    }

    .app-content {
      padding: 30px;
      max-width: 1400px;
      margin: 0 auto;
    }

    /* íƒ­ ìŠ¤íƒ€ì¼ (ê´€ë¦¬ììš©) */
    .tab-navigation {
      background: white;
      border-bottom: 2px solid var(--ok-border-light);
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .tab-container {
      display: flex;
      max-width: 1400px;
      margin: 0 auto;
    }

    .tab-button {
      background: none;
      border: none;
      padding: 20px 30px;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--ok-text-dark);
      cursor: pointer;
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
      position: relative;
    }

    .tab-button:hover {
      background: rgba(233, 61, 26, 0.05);
      color: var(--ok-orange);
    }

    .tab-button.active {
      color: var(--ok-orange);
      border-bottom-color: var(--ok-orange);
      background: rgba(233, 61, 26, 0.05);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ê¸°ë³¸ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      border: 1px solid var(--ok-border-light);
      margin-bottom: 30px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .card-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--ok-text-dark);
    }

    /* ì‘ì„±ì ì „ìš© - íšŒì˜ ì„ íƒ */
    .meeting-selector {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      border: 1px solid var(--ok-border-light);
      margin-bottom: 30px;
    }

    .selector-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .selector-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .selector-group label {
      font-weight: 600;
      color: var(--ok-text-dark);
    }

    .form-select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid var(--ok-border-light);
      border-radius: 8px;
      font-size: 1rem;
      background: #fafafa;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .form-select:focus {
      outline: none;
      border-color: var(--ok-orange);
      background: white;
    }

    .btn-primary {
      background: var(--ok-orange);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      background: #ff4520;
    }

    .btn-primary:disabled {
      background: var(--ok-bright-gray);
      cursor: not-allowed;
    }

    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      text-align: center;
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--ok-text-dark);
      margin-bottom: 20px;
    }

    .modal-subtitle {
      color: var(--ok-dark-brown);
      margin-bottom: 30px;
      line-height: 1.5;
    }

    /* ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ */
    .dashboard-stats {
      margin-bottom: 30px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
    }

    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      border: 1px solid var(--ok-border-light);
      display: flex;
      align-items: center;
      gap: 20px;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--ok-orange) 0%, var(--ok-yellow) 100%);
    }

    .stat-icon {
      font-size: 3rem;
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--ok-orange) 0%, var(--ok-yellow) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .stat-content {
      flex: 1;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 900;
      color: var(--ok-orange);
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--ok-text-dark);
      margin-bottom: 5px;
    }

    .stat-desc {
      color: var(--ok-dark-brown);
      font-size: 0.9rem;
    }

    .filter-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      align-items: end;
    }

    .card-actions {
      display: flex;
      gap: 10px;
    }

    .table-container {
      overflow-x: auto;
      border-radius: 10px;
      border: 1px solid var(--ok-border-light);
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95rem;
    }

    .data-table th,
    .data-table td {
      padding: 15px 20px;
      text-align: left;
      border-bottom: 1px solid var(--ok-border-light);
    }

    .data-table th {
      background: var(--ok-bg-gray);
      font-weight: 600;
      color: var(--ok-text-dark);
    }

    .data-table tbody tr:hover {
      background: rgba(233, 61, 26, 0.05);
    }

    .status-badge {
      padding: 6px 12px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: 600;
      text-align: center;
      min-width: 80px;
      display: inline-block;
    }

    .status-completed {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .status-pending {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }

    .status-not-started {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f1b0b7;
    }

    .empty-state {
      text-align: center;
      padding: 50px 20px;
      color: var(--ok-bright-gray);
    }

    .empty-icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: var(--ok-text-dark);
    }

    .empty-state p {
      font-size: 1rem;
      color: var(--ok-dark-brown);
    }

    .btn-action {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 600;
      transition: all 0.3s ease;
      margin: 0 2px;
    }

    .btn-view {
      background: #007bff;
      color: white;
    }

    .btn-view:hover {
      background: #0056b3;
    }

    .btn-edit {
      background: #28a745;
      color: white;
    }

    .btn-edit:hover {
      background: #1e7e34;
    }

    .btn-delete {
      background: #dc3545;
      color: white;
    }

    .btn-delete:hover {
      background: #c82333;
    }

    /* ê³„ì • ê´€ë¦¬ ìŠ¤íƒ€ì¼ */
    .account-stats {
      margin-bottom: 30px;
    }

    .account-creation-form {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid var(--ok-border-light);
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .account-status {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 600;
      display: inline-block;
    }

    .account-status.active {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .account-status.inactive {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f1b0b7;
    }

    .account-status.online {
      background: #cce5ff;
      color: #004085;
      border: 1px solid #b3d9ff;
    }

    .btn-manage {
      padding: 4px 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.7rem;
      font-weight: 600;
      transition: all 0.3s ease;
      margin: 0 2px;
    }

    .btn-activate {
      background: #28a745;
      color: white;
    }

    .btn-activate:hover {
      background: #1e7e34;
    }

    .btn-deactivate {
      background: #ffc107;
      color: #212529;
    }

    .btn-deactivate:hover {
      background: #e0a800;
    }

    .btn-reset {
      background: #17a2b8;
      color: white;
    }

    .btn-reset:hover {
      background: #138496;
    }

    .btn-remove {
      background: #dc3545;
      color: white;
    }

    .btn-remove:hover {
      background: #c82333;
    }

    /* ë³´ì•ˆ ì„¤ì • ìŠ¤íƒ€ì¼ */
    .security-stats {
      margin-bottom: 30px;
    }

    .admin-settings {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
      border: 1px solid var(--ok-border-light);
    }

    .setting-info h3 {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--ok-text-dark);
      margin-bottom: 10px;
    }

    .setting-info p {
      color: var(--ok-dark-brown);
      margin-bottom: 5px;
    }

    .setting-actions {
      flex-shrink: 0;
    }

    .login-filter {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid var(--ok-border-light);
      margin-bottom: 20px;
    }

    .filter-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      align-items: end;
    }

    .login-status {
      padding: 4px 8px;
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: 600;
      display: inline-block;
    }

    .login-status.success {
      background: #d4edda;
      color: #155724;
    }

    .login-status.failed {
      background: #f8d7da;
      color: #721c24;
    }

    .ip-address {
      font-family: 'Courier New', monospace;
      background: #f8f9fa;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.9rem;
    }

    .browser-info {
      font-size: 0.8rem;
      color: var(--ok-dark-brown);
      max-width: 200px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 768px) {
      .login-container {
        padding: 30px 20px;
      }

      .app-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .header-left {
        flex-direction: column;
        gap: 10px;
      }

      .header-right {
        flex-direction: column;
        gap: 10px;
      }

      .app-content {
        padding: 20px;
      }

      .tab-container {
        flex-direction: column;
      }

      .tab-button {
        padding: 15px 20px;
      }

      .selector-grid {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .filter-grid {
        grid-template-columns: 1fr;
      }

      .stat-card {
        flex-direction: column;
        text-align: center;
      }

      .stat-icon {
        width: 60px;
        height: 60px;
        font-size: 2rem;
      }

      .stat-number {
        font-size: 2rem;
      }

      .card-actions {
        flex-direction: column;
        width: 100%;
      }

      .data-table {
        font-size: 0.85rem;
      }

      .data-table th,
      .data-table td {
        padding: 10px 8px;
      }

      .btn-action {
        padding: 4px 8px;
        font-size: 0.7rem;
      }

      .setting-item {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .setting-actions {
        width: 100%;
      }

      .filter-row {
        grid-template-columns: 1fr;
      }

      .login-filter {
        padding: 15px;
      }

      .browser-info {
        max-width: 100px;
      }

      .btn-manage {
        padding: 3px 6px;
        font-size: 0.6rem;
      }
    }
  </style>
</head>
<body>
  <!-- í†µí•© ë¡œê·¸ì¸ í˜ì´ì§€ -->
  <div class="login-page" id="loginPage">
    <div class="login-container">
      <div class="login-header">
        <div class="login-logo">
          <svg width="140" height="50" viewBox="0 0 140 50" style="height: 60px; width: auto;">
            <defs>
              <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#554744;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#3d3330;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#E93D1A;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#d32f0f;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect width="140" height="50" rx="12" fill="url(#bgGradient)"/>
            <rect x="0" y="0" width="8" height="50" rx="12" fill="url(#orangeGradient)"/>
            <text x="18" y="34" font-family="Arial, sans-serif" font-size="24" font-weight="900" fill="#2a2a2a" opacity="0.3">OK</text>
            <text x="16" y="32" font-family="Arial, sans-serif" font-size="24" font-weight="900" fill="white">OK</text>
            <text x="52" y="34" font-family="Arial, sans-serif" font-size="26" font-weight="900" fill="#2a2a2a" opacity="0.3">!</text>
            <text x="50" y="32" font-family="Arial, sans-serif" font-size="26" font-weight="900" fill="#E93D1A">!</text>
            <text x="70" y="22" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="white">ì €ì¶•ì€í–‰</text>
            <text x="70" y="36" font-family="Arial, sans-serif" font-size="9" font-weight="500" fill="#F4A611">SAVINGS BANK</text>
            <circle cx="125" cy="15" r="4" fill="#E93D1A" opacity="0.8"/>
            <circle cx="130" cy="25" r="2.5" fill="#F4A611" opacity="0.9"/>
            <circle cx="120" cy="35" r="2" fill="#E93D1A" opacity="0.6"/>
          </svg>
        </div>
        <h1 class="login-title">OKì €ì¶•ì€í–‰ íšŒì˜ìë£Œ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
        <p class="login-subtitle">ì‹œìŠ¤í…œì— ì ‘ì†í•˜ë ¤ë©´ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”</p>
      </div>
      
      <div class="login-type-selector">
        <button class="login-type-btn active" onclick="switchLoginType('admin')">ê´€ë¦¬ì</button>
        <button class="login-type-btn" onclick="switchLoginType('writer')">ì‘ì„±ì</button>
      </div>

      <div id="adminLoginForm" class="login-form">
        <div class="form-group">
          <label for="adminId">ê´€ë¦¬ì ID</label>
          <input type="text" id="adminId" class="form-input" placeholder="OKADMIN" value="OKADMIN" readonly>
        </div>
        <div class="form-group">
          <label for="adminPassword">ë¹„ë°€ë²ˆí˜¸</label>
          <input type="password" id="adminPassword" class="form-input" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <button class="login-btn" onclick="handleAdminLogin()">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
      </div>

      <div id="writerLoginForm" class="login-form" style="display: none;">
        <div class="form-group">
          <label for="writerId">ì‘ì„±ì ID</label>
          <input type="text" id="writerId" class="form-input" placeholder="OK 1 ~ OK 20">
        </div>
        <div class="form-group">
          <label for="writerPassword">ë¹„ë°€ë²ˆí˜¸</label>
          <input type="password" id="writerPassword" class="form-input" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <button class="login-btn" onclick="handleWriterLogin()">ì‘ì„±ì ë¡œê·¸ì¸</button>
      </div>

      <div id="loginMessage" class="login-message"></div>
    </div>
  </div>

  <!-- ë©”ì¸ ì•± -->
  <div class="main-app" id="mainApp">
    <div class="app-header">
      <div class="header-left">
        <div class="header-logo">
          <svg width="140" height="50" viewBox="0 0 140 50" style="height: 40px; width: auto;">
            <defs>
              <linearGradient id="bgGradient2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#554744;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#3d3330;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="orangeGradient2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#E93D1A;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#d32f0f;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect width="140" height="50" rx="12" fill="url(#bgGradient2)"/>
            <rect x="0" y="0" width="8" height="50" rx="12" fill="url(#orangeGradient2)"/>
            <text x="18" y="34" font-family="Arial, sans-serif" font-size="24" font-weight="900" fill="#2a2a2a" opacity="0.3">OK</text>
            <text x="16" y="32" font-family="Arial, sans-serif" font-size="24" font-weight="900" fill="white">OK</text>
            <text x="52" y="34" font-family="Arial, sans-serif" font-size="26" font-weight="900" fill="#2a2a2a" opacity="0.3">!</text>
            <text x="50" y="32" font-family="Arial, sans-serif" font-size="26" font-weight="900" fill="#E93D1A">!</text>
            <text x="70" y="22" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="white">ì €ì¶•ì€í–‰</text>
            <text x="70" y="36" font-family="Arial, sans-serif" font-size="9" font-weight="500" fill="#F4A611">SAVINGS BANK</text>
            <circle cx="125" cy="15" r="4" fill="#E93D1A" opacity="0.8"/>
            <circle cx="130" cy="25" r="2.5" fill="#F4A611" opacity="0.9"/>
            <circle cx="120" cy="35" r="2" fill="#E93D1A" opacity="0.6"/>
          </svg>
        </div>
        <h1 class="header-title" id="headerTitle">íšŒì˜ìë£Œ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
      </div>
      <div class="header-right">
        <div class="user-info" id="userInfo">ì‚¬ìš©ì</div>
        <button class="btn-header secondary" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </div>

    <!-- ê´€ë¦¬ì ì „ìš© íƒ­ -->
    <div class="tab-navigation" id="adminTabs" style="display: none;">
      <div class="tab-container">
        <button class="tab-button active" onclick="switchTab('dashboard')">ğŸ“Š ëŒ€ì‹œë³´ë“œ</button>
        <button class="tab-button" onclick="switchTab('accounts')">ğŸ‘¥ ê³„ì •ê´€ë¦¬</button>
        <button class="tab-button" onclick="switchTab('security')">ğŸ” ë³´ì•ˆì„¤ì •</button>
      </div>
    </div>

    <div class="app-content">
      <!-- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ -->
      <div id="dashboardTab" class="tab-content">
        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="dashboard-stats">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ“…</div>
              <div class="stat-content">
                <h3 class="stat-number" id="totalMeetings">0</h3>
                <p class="stat-label">ì „ì²´ ë¶€ì„œ</p>
                <p class="stat-desc">16ê°œ ë¶€ì„œ</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">âœ…</div>
              <div class="stat-content">
                <h3 class="stat-number" id="completedTasks">0</h3>
                <p class="stat-label">ì‘ì„±ì™„ë£Œ</p>
                <p class="stat-desc">ì™„ë£Œëœ íšŒì˜ìë£Œ</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ“</div>
              <div class="stat-content">
                <h3 class="stat-number" id="pendingTasks">0</h3>
                <p class="stat-label">ì‘ì„±ì¤‘</p>
                <p class="stat-desc">ì§„í–‰ì¤‘ì¸ íšŒì˜ìë£Œ</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">â³</div>
              <div class="stat-content">
                <h3 class="stat-number" id="notStartedTasks">0</h3>
                <p class="stat-label">ë¯¸ì‘ì„±</p>
                <p class="stat-desc">ì‹œì‘í•˜ì§€ ì•Šì€ íšŒì˜ìë£Œ</p>
              </div>
            </div>
          </div>
        </div>

        <!-- íšŒì˜ ì„ íƒ í•„í„° -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">íšŒì˜ ì„ íƒ</h2>
          </div>
          <div class="filter-grid">
            <div class="form-group">
              <label for="filterYear">ì—°ë„</label>
              <select id="filterYear" class="form-select">
                <option value="">ì—°ë„ ì„ íƒ</option>
                <option value="2025">2025ë…„</option>
              </select>
            </div>
            <div class="form-group">
              <label for="filterMonth">ì›”</label>
              <select id="filterMonth" class="form-select">
                <option value="">ì›” ì„ íƒ</option>
                <option value="08">8ì›”</option>
                <option value="09">9ì›”</option>
                <option value="10">10ì›”</option>
                <option value="11">11ì›”</option>
                <option value="12">12ì›”</option>
              </select>
            </div>
            <div class="form-group">
              <label for="filterType">íšŒì˜ êµ¬ë¶„</label>
              <select id="filterType" class="form-select">
                <option value="">íšŒì˜ êµ¬ë¶„ ì„ íƒ</option>
                <option value="monthly">ì›”ê°„ê°„ë‹´íšŒ</option>
                <option value="week1">1ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week2">2ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week3">3ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week4">4ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week5">5ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
              </select>
            </div>
            <div class="form-group">
              <button class="btn-primary" onclick="searchMeeting()" id="searchBtn" disabled>íšŒì˜ ì¡°íšŒ</button>
            </div>
          </div>
        </div>

        <!-- íšŒì˜ìë£Œ í˜„í™© í…Œì´ë¸” -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">íšŒì˜ìë£Œ ì‘ì„± í˜„í™©</h2>
            <div class="card-actions">
              <button class="btn-header" onclick="exportCurrentData()">ğŸ“Š ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
              <button class="btn-header secondary" onclick="refreshData()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
          </div>
          <div id="tableContent">
            <div class="empty-state" id="emptyState">
              <div class="empty-icon">ğŸ“Š</div>
              <h3>íšŒì˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
              <p>ìœ„ì—ì„œ ì—°ë„, ì›”, íšŒì˜ êµ¬ë¶„ì„ ì„ íƒí•œ í›„ íšŒì˜ ì¡°íšŒ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
            </div>
            <div class="table-container" id="dataTableContainer" style="display: none;">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>íšŒì˜ëª…</th>
                    <th>ë¶€ì„œ</th>
                    <th>ìƒíƒœ</th>
                    <th>ë§ˆì§€ë§‰ ìˆ˜ì •</th>
                    <th>ì•¡ì…˜</th>
                  </tr>
                </thead>
                <tbody id="dataTableBody">
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- ê³„ì • ê´€ë¦¬ -->
      <div id="accountsTab" class="tab-content">
        <!-- ê³„ì • í˜„í™© í†µê³„ -->
        <div class="account-stats">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ‘¥</div>
              <div class="stat-content">
                <h3 class="stat-number" id="totalAccounts">0</h3>
                <p class="stat-label">ì „ì²´ ê³„ì •</p>
                <p class="stat-desc">OK 1 ~ OK 20</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">âœ…</div>
              <div class="stat-content">
                <h3 class="stat-number" id="activeAccounts">0</h3>
                <p class="stat-label">í™œì„± ê³„ì •</p>
                <p class="stat-desc">ì‚¬ìš© ê°€ëŠ¥í•œ ê³„ì •</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ”’</div>
              <div class="stat-content">
                <h3 class="stat-number" id="inactiveAccounts">0</h3>
                <p class="stat-label">ë¹„í™œì„± ê³„ì •</p>
                <p class="stat-desc">ë¹„í™œì„±í™”ëœ ê³„ì •</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸŒ</div>
              <div class="stat-content">
                <h3 class="stat-number" id="onlineAccounts">0</h3>
                <p class="stat-label">ì ‘ì†ì¤‘ ê³„ì •</p>
                <p class="stat-desc">í˜„ì¬ ë¡œê·¸ì¸í•œ ê³„ì •</p>
              </div>
            </div>
          </div>
        </div>

        <!-- ìƒˆ ê³„ì • ìƒì„± -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ìƒˆ ê³„ì • ìƒì„±</h2>
          </div>
          <div class="account-creation-form">
            <div class="form-row">
              <div class="form-group">
                <label for="newAccountId">ê³„ì • ID</label>
                <select id="newAccountId" class="form-select">
                  <option value="">ê³„ì • ID ì„ íƒ</option>
                </select>
              </div>
              <div class="form-group">
                <label for="newAccountPw">ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="newAccountPw" class="form-input" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" maxlength="30">
              </div>
              <div class="form-group">
                <label for="newAccountDept">ë‹´ë‹¹ ë¶€ì„œ</label>
                <select id="newAccountDept" class="form-select">
                  <option value="">ë¶€ì„œ ì„ íƒ</option>
                </select>
              </div>
            </div>
            <button class="btn-primary" onclick="createNewAccount()">â• ê³„ì • ìƒì„±</button>
            <div id="accountCreationMessage" class="login-message"></div>
          </div>
        </div>

        <!-- ê³„ì • ëª©ë¡ -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ê³„ì • ëª©ë¡</h2>
            <div class="card-actions">
              <button class="btn-header" onclick="exportAccountData()">ğŸ“Š ê³„ì • ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
              <button class="btn-header secondary" onclick="refreshAccountData()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ë²ˆí˜¸</th>
                  <th>ê³„ì • ID</th>
                  <th>ë‹´ë‹¹ ë¶€ì„œ</th>
                  <th>ìƒíƒœ</th>
                  <th>ìƒì„±ì¼</th>
                  <th>ë§ˆì§€ë§‰ ë¡œê·¸ì¸</th>
                  <th>ê´€ë¦¬</th>
                </tr>
              </thead>
              <tbody id="accountTableBody">
                <tr>
                  <td colspan="7" style="text-align: center; color: #999; padding: 40px;">
                    ë“±ë¡ëœ ê³„ì •ì´ ì—†ìŠµë‹ˆë‹¤.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ë³´ì•ˆ ì„¤ì • -->
      <div id="securityTab" class="tab-content">
        <!-- ì‹œìŠ¤í…œ ë³´ì•ˆ í˜„í™© -->
        <div class="security-stats">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ”</div>
              <div class="stat-content">
                <h3 class="stat-number" id="totalLogins">0</h3>
                <p class="stat-label">ì´ ë¡œê·¸ì¸ ì‹œë„</p>
                <p class="stat-desc">ì „ì²´ ë¡œê·¸ì¸ ê¸°ë¡</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">âœ…</div>
              <div class="stat-content">
                <h3 class="stat-number" id="successLogins">0</h3>
                <p class="stat-label">ì„±ê³µí•œ ë¡œê·¸ì¸</p>
                <p class="stat-desc">ì •ìƒ ë¡œê·¸ì¸</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">âŒ</div>
              <div class="stat-content">
                <h3 class="stat-number" id="failedLogins">0</h3>
                <p class="stat-label">ì‹¤íŒ¨í•œ ë¡œê·¸ì¸</p>
                <p class="stat-desc">ë¡œê·¸ì¸ ì‹¤íŒ¨</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸŒ</div>
              <div class="stat-content">
                <h3 class="stat-number" id="onlineUsers">0</h3>
                <p class="stat-label">í˜„ì¬ ì ‘ì†ì</p>
                <p class="stat-desc">ì‹¤ì‹œê°„ ì ‘ì†ì</p>
              </div>
            </div>
          </div>
        </div>

        <!-- ê´€ë¦¬ì ì„¤ì • -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ê´€ë¦¬ì ì„¤ì •</h2>
          </div>
          <div class="admin-settings">
            <div class="setting-item">
              <div class="setting-info">
                <h3>í˜„ì¬ ê´€ë¦¬ì ê³„ì •</h3>
                <p>ID: <strong>OKADMIN</strong></p>
                <p>ë§ˆì§€ë§‰ ë¡œê·¸ì¸: <span id="adminLastLogin">-</span></p>
              </div>
              <div class="setting-actions">
                <button class="btn-primary" onclick="showAdminPasswordChange()">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
              </div>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h3>ì‹œìŠ¤í…œ ì„¤ì •</h3>
                <p>ìë™ ë¡œê·¸ì•„ì›ƒ: <span id="autoLogoutTime">30ë¶„</span></p>
                <p>ë¡œê·¸ì¸ ì‹œë„ ì œí•œ: <span id="loginAttemptLimit">5íšŒ</span></p>
              </div>
              <div class="setting-actions">
                <button class="btn-primary" onclick="showSystemSettings()">ì‹œìŠ¤í…œ ì„¤ì •</button>
              </div>
            </div>
          </div>
        </div>

        <!-- ë¡œê·¸ì¸ ê¸°ë¡ -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ë¡œê·¸ì¸ ê¸°ë¡</h2>
            <div class="card-actions">
              <button class="btn-header" onclick="exportLoginData()">ğŸ“Š ë¡œê·¸ì¸ ê¸°ë¡ ë‚´ë³´ë‚´ê¸°</button>
              <button class="btn-header secondary" onclick="clearLoginRecords()">ğŸ—‘ï¸ ê¸°ë¡ ì‚­ì œ</button>
              <button class="btn-header secondary" onclick="refreshLoginData()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
          </div>
          <div class="login-filter">
            <div class="filter-row">
              <div class="form-group">
                <label for="loginUserFilter">ì‚¬ìš©ì í•„í„°</label>
                <select id="loginUserFilter" class="form-select">
                  <option value="">ì „ì²´ ì‚¬ìš©ì</option>
                </select>
              </div>
              <div class="form-group">
                <label for="loginStatusFilter">ìƒíƒœ í•„í„°</label>
                <select id="loginStatusFilter" class="form-select">
                  <option value="">ì „ì²´ ìƒíƒœ</option>
                  <option value="true">ì„±ê³µ</option>
                  <option value="false">ì‹¤íŒ¨</option>
                </select>
              </div>
              <div class="form-group">
                <label for="loginDateFilter">ë‚ ì§œ í•„í„°</label>
                <input type="date" id="loginDateFilter" class="form-input">
              </div>
              <div class="form-group">
                <button class="btn-primary" onclick="applyLoginFilters()">í•„í„° ì ìš©</button>
              </div>
            </div>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ë²ˆí˜¸</th>
                  <th>ì‚¬ìš©ì ID</th>
                  <th>ë¡œê·¸ì¸ ì‹œê°„</th>
                  <th>ìƒíƒœ</th>
                  <th>IP ì£¼ì†Œ</th>
                  <th>ë¸Œë¼ìš°ì €</th>
                </tr>
              </thead>
              <tbody id="loginRecordsBody">
                <tr>
                  <td colspan="6" style="text-align: center; color: #999; padding: 40px;">
                    ë¡œê·¸ì¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ì‘ì„±ì íšŒì˜ ì„ íƒ -->
      <div id="writerContent" class="tab-content" style="display: none;">
        <div class="meeting-selector">
          <h2 class="card-title" style="margin-bottom: 25px;">íšŒì˜ ì„ íƒ</h2>
          <div class="selector-grid">
            <div class="selector-group">
              <label for="yearSelect">ì—°ë„</label>
              <select id="yearSelect" class="form-select">
                <option value="">ì—°ë„ ì„ íƒ</option>
                <option value="2025">2025ë…„</option>
              </select>
            </div>
            <div class="selector-group">
              <label for="monthSelect">ì›”</label>
              <select id="monthSelect" class="form-select">
                <option value="">ì›” ì„ íƒ</option>
                <option value="08">8ì›”</option>
                <option value="09">9ì›”</option>
                <option value="10">10ì›”</option>
                <option value="11">11ì›”</option>
                <option value="12">12ì›”</option>
              </select>
            </div>
            <div class="selector-group">
              <label for="meetingTypeSelect">íšŒì˜ êµ¬ë¶„</label>
              <select id="meetingTypeSelect" class="form-select">
                <option value="">íšŒì˜ êµ¬ë¶„ ì„ íƒ</option>
                <option value="monthly">ì›”ê°„ê°„ë‹´íšŒ</option>
                <option value="week1">1ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week2">2ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week3">3ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week4">4ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
                <option value="week5">5ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ</option>
              </select>
            </div>
          </div>
          <button id="confirmBtn" class="btn-primary" onclick="goToMeeting()" disabled>íšŒì˜ìë£Œ ì‘ì„±í•˜ê¸°</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ -->
  <div id="passwordModal" class="modal">
    <div class="modal-content">
      <h2 class="modal-title">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h2>
      <p class="modal-subtitle">ë³´ì•ˆì„ ìœ„í•´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•´ì£¼ì„¸ìš”.</p>
      <div class="form-group">
        <label for="currentPassword">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
        <input type="password" id="currentPassword" class="form-input">
      </div>
      <div class="form-group">
        <label for="newPassword">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
        <input type="password" id="newPassword" class="form-input">
      </div>
      <div class="form-group">
        <label for="confirmPassword">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
        <input type="password" id="confirmPassword" class="form-input">
      </div>
      <button class="login-btn" onclick="changePassword()">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
      <div id="passwordMessage" class="login-message"></div>
    </div>
  </div>

  <script>
    // ì „ì—­ ë³€ìˆ˜
    let currentUser = null;
    let currentUserRole = null;

    // 16ê°œ ë¶€ì„œ ëª©ë¡
    const departments = [
      'ì˜ì—…ì¶”ì§„ë¶€', 'ë¦¬í…Œì¼ê¸°íšë¶€', 'ëª¨ê¸°ì§€ì‚¬ì—…ë¶€', 'ì‹¬ì‚¬ë¶€', 
      'ë¦¬ìŠ¤í¬ê´€ë¦¬ë¶€', 'ê²½ì˜ê´€ë¦¬ë³¸ë¶€(ê²½ì˜ê¸°íšë¶€)', 'ê²½ì˜ê´€ë¦¬ë³¸ë¶€(ITê¸°íšë¶€)', 'ë¯¸ë˜ë””ì§€í„¸ë¶€',
      'ì†Œë¹„ìê¸ˆìœµì˜ì—…ë¶€', 'ì†Œë¹„ìê¸ˆìœµê¸°íšë¶€', 'ì‹ ìš©ê´€ë¦¬ë¶€', 'ë§ˆì¼€íŒ…íŒ€',
      'ê°ì‚¬ë¶€', 'ì¤€ë²•ì§€ì›ë¶€', 'ê¸ˆìœµì†Œë¹„ìë³´í˜¸ë¶€', 'ì •ë³´ë³´ì•ˆíŒ€'
    ];

    // ì´ˆê¸° ì„¤ì •
    document.addEventListener('DOMContentLoaded', function() {
      initializeSystem();
    });

    function initializeSystem() {
      // ê¸°ë³¸ ê´€ë¦¬ì ê³„ì • ìƒì„±
      createDefaultAdminAccount();
      
      // ì‘ì„±ì ê³„ì • ìƒì„± (OK 1 ~ OK 20)
      createWriterAccounts();
      
      // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
      checkLoginStatus();
    }

    function createDefaultAdminAccount() {
      const savedAccounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const adminExists = savedAccounts.some(acc => acc.id === 'OKADMIN');
      
      if (!adminExists) {
        const adminAccount = {
          id: 'OKADMIN',
          password: 'admin123',
          role: 'admin',
          isFirstLogin: true,
          createdAt: new Date().toISOString()
        };
        savedAccounts.push(adminAccount);
        localStorage.setItem('systemAccounts', JSON.stringify(savedAccounts));
      }
    }

    function createWriterAccounts() {
      const savedAccounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      
      for (let i = 1; i <= 20; i++) {
        const accountId = `OK ${i}`;
        const accountExists = savedAccounts.some(acc => acc.id === accountId);
        
        if (!accountExists) {
          const writerAccount = {
            id: accountId,
            password: 'writer123',
            role: 'writer',
            isFirstLogin: true,
            createdAt: new Date().toISOString()
          };
          savedAccounts.push(writerAccount);
        }
      }
      
      localStorage.setItem('systemAccounts', JSON.stringify(savedAccounts));
    }

    function checkLoginStatus() {
      const savedUser = sessionStorage.getItem('currentUser');
      const savedRole = sessionStorage.getItem('currentUserRole');
      
      if (savedUser && savedRole) {
        currentUser = savedUser;
        currentUserRole = savedRole;
        showMainApp();
      } else {
        showLoginPage();
      }
    }

    function switchLoginType(type) {
      document.querySelectorAll('.login-type-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      document.getElementById('adminLoginForm').style.display = type === 'admin' ? 'block' : 'none';
      document.getElementById('writerLoginForm').style.display = type === 'writer' ? 'block' : 'none';
      hideMessage();
    }

    function handleAdminLogin() {
      const id = document.getElementById('adminId').value.trim();
      const password = document.getElementById('adminPassword').value.trim();
      
      if (!id || !password) {
        showMessage('IDì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
      }
      
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const account = accounts.find(acc => acc.id === id && acc.password === password && acc.role === 'admin');
      
      if (account) {
        currentUser = account.id;
        currentUserRole = account.role;
        
        sessionStorage.setItem('currentUser', currentUser);
        sessionStorage.setItem('currentUserRole', currentUserRole);
        
        // ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„ ì—…ë°ì´íŠ¸
        const accountIndex = accounts.findIndex(acc => acc.id === id);
        if (accountIndex !== -1) {
          accounts[accountIndex].lastLogin = new Date().toISOString();
          localStorage.setItem('systemAccounts', JSON.stringify(accounts));
        }
        
        if (account.isFirstLogin) {
          showPasswordModal();
        } else {
          showMainApp();
        }
        
        recordLoginAttempt(id, true);
      } else {
        showMessage('ê´€ë¦¬ì ID ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
        recordLoginAttempt(id, false);
      }
    }

    function handleWriterLogin() {
      const id = document.getElementById('writerId').value.trim();
      const password = document.getElementById('writerPassword').value.trim();
      
      if (!id || !password) {
        showMessage('IDì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
      }
      
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const account = accounts.find(acc => acc.id === id && acc.password === password && acc.role === 'writer');
      
      if (account) {
        currentUser = account.id;
        currentUserRole = account.role;
        
        sessionStorage.setItem('currentUser', currentUser);
        sessionStorage.setItem('currentUserRole', currentUserRole);
        
        // ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„ ì—…ë°ì´íŠ¸
        const accountIndex = accounts.findIndex(acc => acc.id === id);
        if (accountIndex !== -1) {
          accounts[accountIndex].lastLogin = new Date().toISOString();
          localStorage.setItem('systemAccounts', JSON.stringify(accounts));
        }
        
        if (account.isFirstLogin) {
          showPasswordModal();
        } else {
          showMainApp();
        }
        
        recordLoginAttempt(id, true);
      } else {
        showMessage('ì‘ì„±ì ID ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
        recordLoginAttempt(id, false);
      }
    }

    function showPasswordModal() {
      document.getElementById('passwordModal').style.display = 'flex';
    }

    function changePassword() {
      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (!currentPassword || !newPassword || !confirmPassword) {
        showPasswordMessage('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
      }
      
      if (newPassword !== confirmPassword) {
        showPasswordMessage('ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
        return;
      }
      
      if (newPassword.length < 4) {
        showPasswordMessage('ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.', 'error');
        return;
      }
      
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const accountIndex = accounts.findIndex(acc => acc.id === currentUser);
      
      if (accountIndex !== -1 && accounts[accountIndex].password === currentPassword) {
        accounts[accountIndex].password = newPassword;
        accounts[accountIndex].isFirstLogin = false;
        localStorage.setItem('systemAccounts', JSON.stringify(accounts));
        
        showPasswordMessage('ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        
        setTimeout(() => {
          document.getElementById('passwordModal').style.display = 'none';
          showMainApp();
        }, 2000);
      } else {
        showPasswordMessage('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
      }
    }

    function showMainApp() {
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      
      // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
      document.getElementById('userInfo').textContent = `${currentUser} (${currentUserRole === 'admin' ? 'ê´€ë¦¬ì' : 'ì‘ì„±ì'})`;
      
      if (currentUserRole === 'admin') {
        document.getElementById('headerTitle').textContent = 'ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ';
        document.getElementById('adminTabs').style.display = 'block';
        document.getElementById('dashboardTab').style.display = 'block';
        document.getElementById('writerContent').style.display = 'none';
        
        // ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
        initializeAdminDashboard();
      } else {
        document.getElementById('headerTitle').textContent = 'íšŒì˜ìë£Œ ì‘ì„± ì‹œìŠ¤í…œ';
        document.getElementById('adminTabs').style.display = 'none';
        document.getElementById('dashboardTab').style.display = 'none';
        document.getElementById('writerContent').style.display = 'block';
      }
    }

    function showLoginPage() {
      document.getElementById('loginPage').style.display = 'flex';
      document.getElementById('mainApp').style.display = 'none';
    }

    function logout() {
      sessionStorage.removeItem('currentUser');
      sessionStorage.removeItem('currentUserRole');
      currentUser = null;
      currentUserRole = null;
      
      // í¼ ì´ˆê¸°í™”
      document.getElementById('adminId').value = 'OKADMIN';
      document.getElementById('adminPassword').value = '';
      document.getElementById('writerId').value = '';
      document.getElementById('writerPassword').value = '';
      
      hideMessage();
      showLoginPage();
    }

    function switchTab(tabName) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      document.querySelectorAll('.tab-content').forEach(content => {
        content.style.display = 'none';
      });
      
      document.getElementById(tabName + 'Tab').style.display = 'block';
    }

    function showMessage(message, type) {
      const messageElement = document.getElementById('loginMessage');
      messageElement.textContent = message;
      messageElement.className = `login-message ${type}`;
      messageElement.style.display = 'block';
    }

    function hideMessage() {
      document.getElementById('loginMessage').style.display = 'none';
    }

    function showPasswordMessage(message, type) {
      const messageElement = document.getElementById('passwordMessage');
      messageElement.textContent = message;
      messageElement.className = `login-message ${type}`;
      messageElement.style.display = 'block';
    }

    function recordLoginAttempt(userId, success) {
      const records = JSON.parse(localStorage.getItem('loginRecords') || '[]');
      const newRecord = {
        userId: userId,
        timestamp: new Date().toISOString(),
        success: success,
        ip: 'localhost', // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” IPë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ ì¶”ê°€
        userAgent: navigator.userAgent
      };
      
      records.push(newRecord);
      
      // ìµœëŒ€ 1000ê°œ ê¸°ë¡ ìœ ì§€
      if (records.length > 1000) {
        records.splice(0, records.length - 1000);
      }
      
      localStorage.setItem('loginRecords', JSON.stringify(records));
    }

    // ì‘ì„±ì íšŒì˜ ì„ íƒ ë¡œì§
    function goToMeeting() {
      const year = document.getElementById('yearSelect').value;
      const month = document.getElementById('monthSelect').value;
      const meetingType = document.getElementById('meetingTypeSelect').value;
      
      if (!year || !month || !meetingType) {
        alert('ëª¨ë“  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // íšŒì˜ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë¡œì§ (ì¶”í›„ êµ¬í˜„)
      alert(`${year}ë…„ ${month}ì›” ${meetingType} íšŒì˜ìë£Œ ì‘ì„± í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
    }

    // íšŒì˜ ì„ íƒ ìœ íš¨ì„± ê²€ì‚¬
    document.addEventListener('DOMContentLoaded', function() {
      const selectors = ['yearSelect', 'monthSelect', 'meetingTypeSelect'];
      selectors.forEach(id => {
        document.getElementById(id).addEventListener('change', function() {
          checkMeetingSelection();
        });
      });
    });

    function checkMeetingSelection() {
      const year = document.getElementById('yearSelect').value;
      const month = document.getElementById('monthSelect').value;
      const meetingType = document.getElementById('meetingTypeSelect').value;
      
      document.getElementById('confirmBtn').disabled = !(year && month && meetingType);
    }

    // ì—”í„° í‚¤ ì´ë²¤íŠ¸
    document.getElementById('adminPassword').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        handleAdminLogin();
      }
    });

    document.getElementById('writerPassword').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        handleWriterLogin();
      }
    });

    // ========== ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥ ==========
    let meetingData = {};
    let currentMeetingData = [];
    let selectedMeeting = null;

    // ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
    function initializeDashboard() {
      loadMeetingData();
      updateDashboardStats();
      setupFilterEventListeners();
    }

    // íšŒì˜ ë°ì´í„° ë¡œë“œ
    function loadMeetingData() {
      meetingData = JSON.parse(localStorage.getItem('meetingData') || '{}');
    }

    // í•„í„° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    function setupFilterEventListeners() {
      const filterIds = ['filterYear', 'filterMonth', 'filterType'];
      filterIds.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.addEventListener('change', checkSearchValid);
        }
      });
    }

    // ê²€ìƒ‰ ë²„íŠ¼ í™œì„±í™” ì²´í¬
    function checkSearchValid() {
      const year = document.getElementById('filterYear').value;
      const month = document.getElementById('filterMonth').value;
      const type = document.getElementById('filterType').value;
      
      const searchBtn = document.getElementById('searchBtn');
      if (searchBtn) {
        searchBtn.disabled = !(year && month && type);
      }
    }

    // íšŒì˜ ê²€ìƒ‰
    function searchMeeting() {
      const year = document.getElementById('filterYear').value;
      const month = document.getElementById('filterMonth').value;
      const type = document.getElementById('filterType').value;
      
      if (!year || !month || !type) {
        alert('ëª¨ë“  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      const meetingId = `${year}-${month}-${type}`;
      const meetingName = generateMeetingName(year, month, type);
      
      selectedMeeting = {
        id: meetingId,
        name: meetingName,
        year,
        month,
        type
      };
      
      // ë¶€ì„œë³„ ë°ì´í„° ì¤€ë¹„
      currentMeetingData = [];
      departments.forEach(dept => {
        const deptData = meetingData[meetingId] ? meetingData[meetingId][dept] : null;
        const status = getDepartmentStatus(deptData);
        const lastModified = getLastModified(deptData);
        
        currentMeetingData.push({
          meetingId,
          meetingName,
          department: dept,
          status,
          lastModified,
          data: deptData
        });
      });
      
      updateDashboardStats();
      renderMeetingTable();
    }

    // íšŒì˜ëª… ìƒì„±
    function generateMeetingName(year, month, type) {
      const monthName = parseInt(month) + 'ì›”';
      if (type === 'monthly') {
        return `${year}ë…„ ${monthName} ì›”ê°„ê°„ë‹´íšŒ`;
      } else {
        const weekNum = type.replace('week', '');
        return `${year}ë…„ ${monthName} ${weekNum}ì£¼ì°¨ ì£¼ê°„ê°„ë‹´íšŒ`;
      }
    }

    // ë¶€ì„œ ìƒíƒœ í™•ì¸
    function getDepartmentStatus(deptData) {
      if (!deptData) return 'not-started';
      if (deptData.completed) return 'completed';
      
      const hasContent = Object.keys(deptData).some(key => 
        key !== 'completed' && key !== 'lastModified' && 
        deptData[key] && deptData[key].toString().trim() !== ''
      );
      
      return hasContent ? 'pending' : 'not-started';
    }

    // ë§ˆì§€ë§‰ ìˆ˜ì •ì¼ í™•ì¸
    function getLastModified(deptData) {
      if (!deptData || !deptData.lastModified) return '-';
      const date = new Date(deptData.lastModified);
      return date.toLocaleDateString('ko-KR') + ' ' + date.toLocaleTimeString('ko-KR', {hour: '2-digit', minute: '2-digit'});
    }

    // ëŒ€ì‹œë³´ë“œ í†µê³„ ì—…ë°ì´íŠ¸
    function updateDashboardStats() {
      const stats = calculateStats();
      
      document.getElementById('totalMeetings').textContent = stats.totalDepartments;
      document.getElementById('completedTasks').textContent = stats.completed;
      document.getElementById('pendingTasks').textContent = stats.pending;
      document.getElementById('notStartedTasks').textContent = stats.notStarted;
    }

    // í†µê³„ ê³„ì‚°
    function calculateStats() {
      if (!selectedMeeting) {
        return { totalDepartments: 16, completed: 0, pending: 0, notStarted: 0 };
      }
      
      const totalDepartments = departments.length;
      let completed = 0;
      let pending = 0;
      let notStarted = 0;
      
      currentMeetingData.forEach(item => {
        switch(item.status) {
          case 'completed': completed++; break;
          case 'pending': pending++; break;
          case 'not-started': notStarted++; break;
        }
      });
      
      return { totalDepartments, completed, pending, notStarted };
    }

    // íšŒì˜ í…Œì´ë¸” ë Œë”ë§
    function renderMeetingTable() {
      const emptyState = document.getElementById('emptyState');
      const tableContainer = document.getElementById('dataTableContainer');
      const tableBody = document.getElementById('dataTableBody');
      
      if (!selectedMeeting || currentMeetingData.length === 0) {
        emptyState.style.display = 'block';
        tableContainer.style.display = 'none';
        return;
      }
      
      emptyState.style.display = 'none';
      tableContainer.style.display = 'block';
      
      tableBody.innerHTML = '';
      currentMeetingData.forEach(item => {
        const row = createTableRow(item);
        tableBody.appendChild(row);
      });
    }

    // í…Œì´ë¸” í–‰ ìƒì„±
    function createTableRow(item) {
      const row = document.createElement('tr');
      
      const statusText = {
        'completed': 'ì‘ì„±ì™„ë£Œ',
        'pending': 'ì‘ì„±ì¤‘',
        'not-started': 'ë¯¸ì‘ì„±'
      };
      
      const statusClass = {
        'completed': 'status-completed',
        'pending': 'status-pending',
        'not-started': 'status-not-started'
      };
      
      row.innerHTML = `
        <td>${item.meetingName}</td>
        <td>${item.department}</td>
        <td><span class="status-badge ${statusClass[item.status]}">${statusText[item.status]}</span></td>
        <td>${item.lastModified}</td>
        <td>
          <button class="btn-action btn-view" onclick="viewMeetingDetail('${item.meetingId}', '${item.department}')">ë³´ê¸°</button>
          <button class="btn-action btn-edit" onclick="editMeetingDetail('${item.meetingId}', '${item.department}')">ìˆ˜ì •</button>
          <button class="btn-action btn-delete" onclick="deleteMeetingDetail('${item.meetingId}', '${item.department}')">ì‚­ì œ</button>
        </td>
      `;
      
      return row;
    }

    // íšŒì˜ ìƒì„¸ë³´ê¸°
    function viewMeetingDetail(meetingId, department) {
      const data = meetingData[meetingId] ? meetingData[meetingId][department] : null;
      if (data) {
        alert(`${department}ì˜ íšŒì˜ìë£Œ:\n\nì£¼ìš”ì‚¬í•­: ${data.keyPoints || 'ì—†ìŒ'}\nì „ì›”/ì „ì£¼ ì‹¤ì : ${data.previousResults || 'ì—†ìŒ'}\nê¸ˆì›”/ê¸ˆì£¼ ê³„íš: ${data.currentPlan || 'ì—†ìŒ'}`);
      } else {
        alert(`${department}ì˜ íšŒì˜ìë£Œê°€ ì—†ìŠµë‹ˆë‹¤.`);
      }
    }

    // íšŒì˜ ìˆ˜ì •
    function editMeetingDetail(meetingId, department) {
      alert(`${department}ì˜ íšŒì˜ìë£Œ ìˆ˜ì • ê¸°ëŠ¥ì€ ì‘ì„±ì ëª¨ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
    }

    // íšŒì˜ ì‚­ì œ
    function deleteMeetingDetail(meetingId, department) {
      if (!confirm(`${department}ì˜ íšŒì˜ìë£Œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
      
      if (meetingData[meetingId] && meetingData[meetingId][department]) {
        delete meetingData[meetingId][department];
        
        // í•´ë‹¹ íšŒì˜ì— ë‹¤ë¥¸ ë¶€ì„œ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ íšŒì˜ ìì²´ ì‚­ì œ
        if (Object.keys(meetingData[meetingId]).length === 0) {
          delete meetingData[meetingId];
        }
        
        localStorage.setItem('meetingData', JSON.stringify(meetingData));
        searchMeeting(); // í…Œì´ë¸” ìƒˆë¡œê³ ì¹¨
        alert('íšŒì˜ìë£Œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
      }
    }

    // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
    function exportCurrentData() {
      if (!selectedMeeting) {
        alert('ë¨¼ì € íšŒì˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      const csvContent = generateCSV(currentMeetingData);
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `${selectedMeeting.name}_í˜„í™©ë°ì´í„°_${new Date().toISOString().split('T')[0]}.csv`;
      link.click();
      URL.revokeObjectURL(url);
    }

    // CSV ìƒì„±
    function generateCSV(data) {
      const headers = ['íšŒì˜ëª…', 'ë¶€ì„œ', 'ìƒíƒœ', 'ë§ˆì§€ë§‰ìˆ˜ì •'];
      const rows = data.map(item => [
        item.meetingName,
        item.department,
        item.status === 'completed' ? 'ì‘ì„±ì™„ë£Œ' : item.status === 'pending' ? 'ì‘ì„±ì¤‘' : 'ë¯¸ì‘ì„±',
        item.lastModified
      ]);
      
      const csvContent = [headers, ...rows]
        .map(row => row.map(field => `"${field}"`).join(','))
        .join('\n');
        
      return '\uFEFF' + csvContent; // BOM ì¶”ê°€ (í•œê¸€ ê¹¨ì§ ë°©ì§€)
    }

    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨
    function refreshData() {
      loadMeetingData();
      updateDashboardStats();
      if (selectedMeeting) {
        searchMeeting();
      }
      alert('ë°ì´í„°ê°€ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }

    // ê´€ë¦¬ì ë¡œê·¸ì¸ í›„ ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
    function initializeAdminDashboard() {
      if (currentUserRole === 'admin') {
        setTimeout(() => {
          initializeDashboard();
          initializeAccountManagement();
          initializeSecuritySettings();
        }, 100);
      }
    }

    // ========== ê³„ì • ê´€ë¦¬ ê¸°ëŠ¥ ==========
    
    // ê³„ì • ê´€ë¦¬ ì´ˆê¸°í™”
    function initializeAccountManagement() {
      setupAccountSelectors();
      updateAccountStats();
      renderAccountTable();
    }

    // ê³„ì • ì„ íƒê¸° ì„¤ì •
    function setupAccountSelectors() {
      const accountSelect = document.getElementById('newAccountId');
      const deptSelect = document.getElementById('newAccountDept');
      
      if (accountSelect) {
        accountSelect.innerHTML = '<option value="">ê³„ì • ID ì„ íƒ</option>';
        
        // ê¸°ì¡´ ê³„ì • í™•ì¸
        const existingAccounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
        const existingIds = existingAccounts.filter(acc => acc.role === 'writer').map(acc => acc.id);
        
        for (let i = 1; i <= 20; i++) {
          const accountId = `OK ${i}`;
          if (!existingIds.includes(accountId)) {
            const option = document.createElement('option');
            option.value = accountId;
            option.textContent = accountId;
            accountSelect.appendChild(option);
          }
        }
      }
      
      if (deptSelect) {
        deptSelect.innerHTML = '<option value="">ë¶€ì„œ ì„ íƒ</option>';
        departments.forEach(dept => {
          const option = document.createElement('option');
          option.value = dept;
          option.textContent = dept;
          deptSelect.appendChild(option);
        });
      }
    }

    // ê³„ì • í†µê³„ ì—…ë°ì´íŠ¸
    function updateAccountStats() {
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const writerAccounts = accounts.filter(acc => acc.role === 'writer');
      
      const total = writerAccounts.length;
      const active = writerAccounts.filter(acc => acc.status !== 'inactive').length;
      const inactive = writerAccounts.filter(acc => acc.status === 'inactive').length;
      const online = writerAccounts.filter(acc => acc.status === 'online').length;
      
      document.getElementById('totalAccounts').textContent = total;
      document.getElementById('activeAccounts').textContent = active;
      document.getElementById('inactiveAccounts').textContent = inactive;
      document.getElementById('onlineAccounts').textContent = online;
    }

    // ìƒˆ ê³„ì • ìƒì„±
    function createNewAccount() {
      const accountId = document.getElementById('newAccountId').value;
      const password = document.getElementById('newAccountPw').value;
      const department = document.getElementById('newAccountDept').value;
      const messageElement = document.getElementById('accountCreationMessage');
      
      if (!accountId || !password || !department) {
        showAccountMessage('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
      }
      
      if (password.length < 4) {
        showAccountMessage('ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.', 'error');
        return;
      }
      
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const existingAccount = accounts.find(acc => acc.id === accountId);
      
      if (existingAccount) {
        showAccountMessage('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê³„ì • IDì…ë‹ˆë‹¤.', 'error');
        return;
      }
      
      const newAccount = {
        id: accountId,
        password: password,
        role: 'writer',
        department: department,
        status: 'active',
        isFirstLogin: true,
        createdAt: new Date().toISOString(),
        lastLogin: null
      };
      
      accounts.push(newAccount);
      localStorage.setItem('systemAccounts', JSON.stringify(accounts));
      
      // í¼ ì´ˆê¸°í™”
      document.getElementById('newAccountId').value = '';
      document.getElementById('newAccountPw').value = '';
      document.getElementById('newAccountDept').value = '';
      
      showAccountMessage(`ê³„ì • "${accountId}"ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
      
      // í™”ë©´ ì—…ë°ì´íŠ¸
      setupAccountSelectors();
      updateAccountStats();
      renderAccountTable();
    }

    // ê³„ì • í…Œì´ë¸” ë Œë”ë§
    function renderAccountTable() {
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const writerAccounts = accounts.filter(acc => acc.role === 'writer');
      const tbody = document.getElementById('accountTableBody');
      
      if (writerAccounts.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="7" style="text-align: center; color: #999; padding: 40px;">
              ë“±ë¡ëœ ê³„ì •ì´ ì—†ìŠµë‹ˆë‹¤.
            </td>
          </tr>
        `;
        return;
      }
      
      tbody.innerHTML = writerAccounts.map((account, index) => `
        <tr>
          <td>${index + 1}</td>
          <td><strong>${account.id}</strong></td>
          <td>${account.department || '-'}</td>
          <td><span class="account-status ${account.status || 'active'}">${getStatusText(account.status)}</span></td>
          <td>${new Date(account.createdAt).toLocaleDateString('ko-KR')}</td>
          <td>${account.lastLogin ? new Date(account.lastLogin).toLocaleString('ko-KR') : 'ì—†ìŒ'}</td>
          <td>
            ${account.status === 'active' ? 
              `<button class="btn-manage btn-deactivate" onclick="toggleAccountStatus('${account.id}', 'inactive')">ë¹„í™œì„±í™”</button>` :
              `<button class="btn-manage btn-activate" onclick="toggleAccountStatus('${account.id}', 'active')">í™œì„±í™”</button>`
            }
            <button class="btn-manage btn-reset" onclick="resetAccountPassword('${account.id}')">ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”</button>
            <button class="btn-manage btn-remove" onclick="removeAccount('${account.id}')">ì‚­ì œ</button>
          </td>
        </tr>
      `).join('');
    }

    // ê³„ì • ìƒíƒœ í…ìŠ¤íŠ¸ ë³€í™˜
    function getStatusText(status) {
      switch(status) {
        case 'active': return 'í™œì„±';
        case 'inactive': return 'ë¹„í™œì„±';
        case 'online': return 'ì ‘ì†ì¤‘';
        default: return 'í™œì„±';
      }
    }

    // ê³„ì • ìƒíƒœ í† ê¸€
    function toggleAccountStatus(accountId, newStatus) {
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const accountIndex = accounts.findIndex(acc => acc.id === accountId);
      
      if (accountIndex !== -1) {
        accounts[accountIndex].status = newStatus;
        localStorage.setItem('systemAccounts', JSON.stringify(accounts));
        
        updateAccountStats();
        renderAccountTable();
        
        const statusText = newStatus === 'active' ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”';
        alert(`ê³„ì • "${accountId}"ì´ ${statusText}ë˜ì—ˆìŠµë‹ˆë‹¤.`);
      }
    }

    // ê³„ì • ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”
    function resetAccountPassword(accountId) {
      if (!confirm(`ê³„ì • "${accountId}"ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
      
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const accountIndex = accounts.findIndex(acc => acc.id === accountId);
      
      if (accountIndex !== -1) {
        accounts[accountIndex].password = 'writer123';
        accounts[accountIndex].isFirstLogin = true;
        localStorage.setItem('systemAccounts', JSON.stringify(accounts));
        
        alert(`ê³„ì • "${accountId}"ì˜ ë¹„ë°€ë²ˆí˜¸ê°€ "writer123"ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.`);
      }
    }

    // ê³„ì • ì‚­ì œ
    function removeAccount(accountId) {
      if (!confirm(`ê³„ì • "${accountId}"ë¥¼ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
      
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const filteredAccounts = accounts.filter(acc => acc.id !== accountId);
      
      localStorage.setItem('systemAccounts', JSON.stringify(filteredAccounts));
      
      setupAccountSelectors();
      updateAccountStats();
      renderAccountTable();
      
      alert(`ê³„ì • "${accountId}"ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }

    // ê³„ì • ë°ì´í„° ë‚´ë³´ë‚´ê¸°
    function exportAccountData() {
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const writerAccounts = accounts.filter(acc => acc.role === 'writer');
      
      if (writerAccounts.length === 0) {
        alert('ë‚´ë³´ë‚¼ ê³„ì • ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      
      const csvContent = generateAccountCSV(writerAccounts);
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `ê³„ì •ëª©ë¡_${new Date().toISOString().split('T')[0]}.csv`;
      link.click();
      URL.revokeObjectURL(url);
    }

    // ê³„ì • CSV ìƒì„±
    function generateAccountCSV(accounts) {
      const headers = ['ë²ˆí˜¸', 'ê³„ì •ID', 'ë‹´ë‹¹ë¶€ì„œ', 'ìƒíƒœ', 'ìƒì„±ì¼', 'ë§ˆì§€ë§‰ë¡œê·¸ì¸'];
      const rows = accounts.map((account, index) => [
        index + 1,
        account.id,
        account.department || '-',
        getStatusText(account.status),
        new Date(account.createdAt).toLocaleDateString('ko-KR'),
        account.lastLogin ? new Date(account.lastLogin).toLocaleString('ko-KR') : 'ì—†ìŒ'
      ]);
      
      const csvContent = [headers, ...rows]
        .map(row => row.map(field => `"${field}"`).join(','))
        .join('\n');
        
      return '\uFEFF' + csvContent;
    }

    // ê³„ì • ë°ì´í„° ìƒˆë¡œê³ ì¹¨
    function refreshAccountData() {
      updateAccountStats();
      renderAccountTable();
      setupAccountSelectors();
      alert('ê³„ì • ë°ì´í„°ê°€ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }

    // ê³„ì • ë©”ì‹œì§€ í‘œì‹œ
    function showAccountMessage(message, type) {
      const messageElement = document.getElementById('accountCreationMessage');
      messageElement.textContent = message;
      messageElement.className = `login-message ${type}`;
      messageElement.style.display = 'block';
      
      setTimeout(() => {
        messageElement.style.display = 'none';
      }, 3000);
    }

    // ========== ë³´ì•ˆ ì„¤ì • ê¸°ëŠ¥ ==========
    
    // ë³´ì•ˆ ì„¤ì • ì´ˆê¸°í™”
    function initializeSecuritySettings() {
      updateSecurityStats();
      loadAdminInfo();
      setupLoginFilters();
      renderLoginRecords();
    }

    // ë³´ì•ˆ í†µê³„ ì—…ë°ì´íŠ¸
    function updateSecurityStats() {
      const loginRecords = JSON.parse(localStorage.getItem('loginRecords') || '[]');
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      
      const totalLogins = loginRecords.length;
      const successLogins = loginRecords.filter(record => record.success).length;
      const failedLogins = loginRecords.filter(record => !record.success).length;
      const onlineUsers = accounts.filter(acc => acc.status === 'online').length;
      
      document.getElementById('totalLogins').textContent = totalLogins;
      document.getElementById('successLogins').textContent = successLogins;
      document.getElementById('failedLogins').textContent = failedLogins;
      document.getElementById('onlineUsers').textContent = onlineUsers;
    }

    // ê´€ë¦¬ì ì •ë³´ ë¡œë“œ
    function loadAdminInfo() {
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      const adminAccount = accounts.find(acc => acc.id === 'OKADMIN');
      
      if (adminAccount && adminAccount.lastLogin) {
        const lastLoginDate = new Date(adminAccount.lastLogin);
        document.getElementById('adminLastLogin').textContent = lastLoginDate.toLocaleString('ko-KR');
      } else {
        document.getElementById('adminLastLogin').textContent = '-';
      }
    }

    // ë¡œê·¸ì¸ í•„í„° ì„¤ì •
    function setupLoginFilters() {
      const userFilter = document.getElementById('loginUserFilter');
      const accounts = JSON.parse(localStorage.getItem('systemAccounts') || '[]');
      
      if (userFilter) {
        userFilter.innerHTML = '<option value="">ì „ì²´ ì‚¬ìš©ì</option>';
        
        // ê³ ìœ í•œ ì‚¬ìš©ì IDë§Œ ì¶”ì¶œ
        const uniqueUsers = [...new Set(accounts.map(acc => acc.id))];
        uniqueUsers.forEach(userId => {
          const option = document.createElement('option');
          option.value = userId;
          option.textContent = userId;
          userFilter.appendChild(option);
        });
      }
    }

    // ë¡œê·¸ì¸ ê¸°ë¡ ë Œë”ë§
    function renderLoginRecords() {
      const loginRecords = JSON.parse(localStorage.getItem('loginRecords') || '[]');
      const tbody = document.getElementById('loginRecordsBody');
      
      if (loginRecords.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="6" style="text-align: center; color: #999; padding: 40px;">
              ë¡œê·¸ì¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.
            </td>
          </tr>
        `;
        return;
      }
      
      // ìµœì‹  ê¸°ë¡ë¶€í„° í‘œì‹œ
      const sortedRecords = loginRecords.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
      
      tbody.innerHTML = sortedRecords.map((record, index) => `
        <tr>
          <td>${index + 1}</td>
          <td><strong>${record.userId}</strong></td>
          <td>${new Date(record.timestamp).toLocaleString('ko-KR')}</td>
          <td><span class="login-status ${record.success ? 'success' : 'failed'}">${record.success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'}</span></td>
          <td><span class="ip-address">${record.ip || 'localhost'}</span></td>
          <td><span class="browser-info" title="${record.userAgent || 'Unknown'}">${getBrowserName(record.userAgent)}</span></td>
        </tr>
      `).join('');
    }

    // ë¸Œë¼ìš°ì € ì´ë¦„ ì¶”ì¶œ
    function getBrowserName(userAgent) {
      if (!userAgent) return 'Unknown';
      
      if (userAgent.includes('Chrome')) return 'Chrome';
      if (userAgent.includes('Firefox')) return 'Firefox';
      if (userAgent.includes('Safari')) return 'Safari';
      if (userAgent.includes('Edge')) return 'Edge';
      if (userAgent.includes('Opera')) return 'Opera';
      
      return 'Unknown';
    }

    // ë¡œê·¸ì¸ í•„í„° ì ìš©
    function applyLoginFilters() {
      const userFilter = document.getElementById('loginUserFilter').value;
      const statusFilter = document.getElementById('loginStatusFilter').value;
      const dateFilter = document.getElementById('loginDateFilter').value;
      
      let loginRecords = JSON.parse(localStorage.getItem('loginRecords') || '[]');
      
      // í•„í„° ì ìš©
      if (userFilter) {
        loginRecords = loginRecords.filter(record => record.userId === userFilter);
      }
      
      if (statusFilter) {
        const isSuccess = statusFilter === 'true';
        loginRecords = loginRecords.filter(record => record.success === isSuccess);
      }
      
      if (dateFilter) {
        const filterDate = new Date(dateFilter);
        loginRecords = loginRecords.filter(record => {
          const recordDate = new Date(record.timestamp);
          return recordDate.toDateString() === filterDate.toDateString();
        });
      }
      
      renderFilteredLoginRecords(loginRecords);
    }

    // í•„í„°ëœ ë¡œê·¸ì¸ ê¸°ë¡ ë Œë”ë§
    function renderFilteredLoginRecords(records) {
      const tbody = document.getElementById('loginRecordsBody');
      
      if (records.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="6" style="text-align: center; color: #999; padding: 40px;">
              í•„í„° ì¡°ê±´ì— ë§ëŠ” ë¡œê·¸ì¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.
            </td>
          </tr>
        `;
        return;
      }
      
      const sortedRecords = records.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
      
      tbody.innerHTML = sortedRecords.map((record, index) => `
        <tr>
          <td>${index + 1}</td>
          <td><strong>${record.userId}</strong></td>
          <td>${new Date(record.timestamp).toLocaleString('ko-KR')}</td>
          <td><span class="login-status ${record.success ? 'success' : 'failed'}">${record.success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'}</span></td>
          <td><span class="ip-address">${record.ip || 'localhost'}</span></td>
          <td><span class="browser-info" title="${record.userAgent || 'Unknown'}">${getBrowserName(record.userAgent)}</span></td>
        </tr>
      `).join('');
    }

    // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
    function showAdminPasswordChange() {
      showPasswordModal();
    }

    // ì‹œìŠ¤í…œ ì„¤ì •
    function showSystemSettings() {
      alert('ì‹œìŠ¤í…œ ì„¤ì • ê¸°ëŠ¥ì€ ì¶”í›„ ì—…ë°ì´íŠ¸ ì˜ˆì •ì…ë‹ˆë‹¤.');
    }

    // ë¡œê·¸ì¸ ë°ì´í„° ë‚´ë³´ë‚´ê¸°
    function exportLoginData() {
      const loginRecords = JSON.parse(localStorage.getItem('loginRecords') || '[]');
      
      if (loginRecords.length === 0) {
        alert('ë‚´ë³´ë‚¼ ë¡œê·¸ì¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      
      const csvContent = generateLoginCSV(loginRecords);
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `ë¡œê·¸ì¸ê¸°ë¡_${new Date().toISOString().split('T')[0]}.csv`;
      link.click();
      URL.revokeObjectURL(url);
    }

    // ë¡œê·¸ì¸ CSV ìƒì„±
    function generateLoginCSV(records) {
      const headers = ['ë²ˆí˜¸', 'ì‚¬ìš©ìID', 'ë¡œê·¸ì¸ì‹œê°„', 'ìƒíƒœ', 'IPì£¼ì†Œ', 'ë¸Œë¼ìš°ì €'];
      const rows = records.map((record, index) => [
        index + 1,
        record.userId,
        new Date(record.timestamp).toLocaleString('ko-KR'),
        record.success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨',
        record.ip || 'localhost',
        getBrowserName(record.userAgent)
      ]);
      
      const csvContent = [headers, ...rows]
        .map(row => row.map(field => `"${field}"`).join(','))
        .join('\n');
        
      return '\uFEFF' + csvContent;
    }

    // ë¡œê·¸ì¸ ê¸°ë¡ ì‚­ì œ
    function clearLoginRecords() {
      if (!confirm('ëª¨ë“  ë¡œê·¸ì¸ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
      
      localStorage.removeItem('loginRecords');
      
      updateSecurityStats();
      renderLoginRecords();
      
      alert('ë¡œê·¸ì¸ ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
    }

    // ë¡œê·¸ì¸ ë°ì´í„° ìƒˆë¡œê³ ì¹¨
    function refreshLoginData() {
      updateSecurityStats();
      renderLoginRecords();
      setupLoginFilters();
      
      // í•„í„° ì´ˆê¸°í™”
      document.getElementById('loginUserFilter').value = '';
      document.getElementById('loginStatusFilter').value = '';
      document.getElementById('loginDateFilter').value = '';
      
      alert('ë¡œê·¸ì¸ ë°ì´í„°ê°€ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
  </script>
</body>
</html>


